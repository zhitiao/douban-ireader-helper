# 豆瓣读书 - 掌阅书城搜索助手

在豆瓣读书页面一键查询掌阅书城是否有电子书资源。

## 安装

**Greasy Fork**: [点击安装](https://greasyfork.org/zh-CN/scripts/552905-%E8%B1%86%E7%93%A3%E8%AF%BB%E4%B9%A6-%E6%8E%8C%E9%98%85%E4%B9%A6%E5%9F%8E%E6%90%9C%E7%B4%A2%E5%8A%A9%E6%89%8B)

## 功能说明

### 支持页面

- **详情页**：书籍详情页面（`https://book.douban.com/subject/*`）

> 注：为避免触发平台风控，已移除列表页批量查询功能

### 匹配规则

由于掌阅书城不支持 ISBN 查询，脚本使用**书名 + 作者**双重匹配来提高准确度：

1. 书名精确匹配（去除副标题、括号等冗余信息）
2. 作者模糊匹配（统一处理中英文分隔符、括号等）
3. 只有唯一匹配时才直接显示"有书"，多个结果时提示"查看搜索结果"

### 匹配结果

脚本会显示三种不同的匹配状态：

| 状态 | 说明 | 操作 |
|------|------|------|
| ✓ 掌阅书城有书 | 书名和作者精确匹配（唯一结果） | 点击直接跳转到书籍详情页 |
| ? 查看搜索结果 | 找到多个结果或作者不匹配 | 点击跳转到搜索结果页，手动确认 |
| ✗ 掌阅书城没有 | 未找到匹配结果 | 无操作 |

## 功能特性

- 自动缓存查询结果（7天有效期）
- 支持查询失败重试
- 书名+作者双重匹配，提高准确度
- 统一处理中英文分隔符，优化作者匹配

## 技术说明

- 基于 Tampermonkey/Greasemonkey
- 使用 localStorage 缓存查询结果
- API 超时时间：10秒
- 仅在详情页运行，避免批量查询触发风控

## 许可证

MIT License
